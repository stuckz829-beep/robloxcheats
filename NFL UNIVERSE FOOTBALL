-- Fallback Loader for 2026
local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/SiriusSoftwareLtd/Rayfield/main/source.lua"))()
end)

if not success then
    warn("Rayfield failed to load. Check your internet or executor connection.")
    return
end

local UIS = game:GetService("UserInputService")
task.wait(0.5) -- Small delay to prevent loading hangs

local Window = Rayfield:CreateWindow({
   Name = "Ultimate Football Hub 2026",
   LoadingTitle = "Initializing Hub...",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false
})

-- [Previous variables and logic remain the same]
local localPlayer = game.Players.LocalPlayer
local isHeadModEnabled, targetHeadScale = false, 1
local isMagEnabled, magRange, isMouseDown = false, 15, false
local visualSphere = nil

-- TABS
local PlayerTab = Window:CreateTab("Player Mods", 4483362458)
local ServerTab = Window:CreateTab("Server Visuals", 4483362458)
local FootballTab = Window:CreateTab("Football Mag", 4483362458)

-- Input Handling
UIS.InputBegan:Connect(function(input, gpe) if not gpe and input.UserInputType == Enum.UserInputType.MouseButton1 then isMouseDown = true end end)
UIS.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 then isMouseDown = false end end)

-- Core Mag/Head Logic
game:GetService("RunService").RenderStepped:Connect(function()
    local ball = workspace:FindFirstChild("Football") or workspace:FindFirstChild("Ball")
    local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")

    if isMagEnabled and ball and hrp and isMouseDown then
        local dist = (hrp.Position - ball.Position).Magnitude
        if dist <= magRange then
            if not visualSphere then
                visualSphere = Instance.new("Part", workspace)
                visualSphere.Shape, visualSphere.Color, visualSphere.Transparency = Enum.PartType.Ball, Color3.new(1,0,0), 0.5
                visualSphere.Material, visualSphere.CanCollide, visualSphere.Anchored = Enum.Material.ForceField, false, true
            end
            visualSphere.Size, visualSphere.Position = Vector3.new(magRange*2, magRange*2, magRange*2), ball.Position
            ball.Velocity = (hrp.Position - ball.Position).Unit * 75
        elseif visualSphere then visualSphere:Destroy() visualSphere = nil end
    elseif visualSphere then visualSphere:Destroy() visualSphere = nil end
end)

-- UI Setup (Buttons & Sliders)
PlayerTab:CreateSlider({Name = "WalkSpeed", Range = {16, 300}, Increment = 1, Suffix = "Speed", CurrentValue = 16, Callback = function(v) if localPlayer.Character:FindFirstChild("Humanoid") then localPlayer.Character.Humanoid.WalkSpeed = v end end})
PlayerTab:CreateSlider({Name = "Gravity", Range = {0, 196}, Increment = 1, Suffix = "Grav", CurrentValue = 196, Callback = function(v) workspace.Gravity = v end})

ServerTab:CreateToggle({Name = "Head Mods", CurrentValue = false, Callback = function(v) isHeadModEnabled = v end})
ServerTab:CreateSlider({Name = "Head Size", Range = {1, 10}, Increment = 0.5, Suffix = "Head Size", CurrentValue = 1, Callback = function(v) targetHeadScale = v end})

FootballTab:CreateToggle({Name = "Enable Mags", CurrentValue = false, Callback = function(v) isMagEnabled = v end})
FootballTab:CreateSlider({Name = "Mag Range", Range = {5, 60}, Increment = 1, Suffix = "Mag Range", CurrentValue = 15, Callback = function(v) magRange = v end})

Rayfield:Notify({Title = "Hub Loaded", Content = "Script active for 2026.", Duration = 5})
