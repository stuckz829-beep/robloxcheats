local Rayfield = loadstring(game:HttpGet('https://sirius.menu'))()
local UIS = game:GetService("UserInputService")

local Window = Rayfield:CreateWindow({
   Name = "Elite Football Hub 2026",
   LoadingTitle = "Initializing Hub...",
   ConfigurationSaving = { Enabled = false },
   KeySystem = false
})

-- State Variables
local localPlayer = game.Players.LocalPlayer
local isHeadModEnabled = false
local targetHeadScale = 1
local isMagEnabled = false
local magRange = 15
local visualSphere = nil
local isMouseDown = false

-- --- TABS ---
local PlayerTab = Window:CreateTab("Player Mods", 4483362458)
local ServerTab = Window:CreateTab("Server Visuals", 4483362458)
local FootballTab = Window:CreateTab("Football Mag", 4483362458)

-- --- INPUT DETECTION ---
UIS.InputBegan:Connect(function(input, processed)
    if not processed and input.UserInputType == Enum.UserInputType.MouseButton1 then
        isMouseDown = true
    end
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isMouseDown = false
    end
end)

-- --- CORE LOGIC ---

-- Head Logic
local function updatePlayerHead(player)
    if player ~= localPlayer then
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:WaitForChild("Humanoid", 5)
        local head = character:WaitForChild("Head", 5)
        if humanoid and head then
            local headScale = humanoid:FindFirstChild("HeadScale")
            if headScale then headScale.Value = isHeadModEnabled and targetHeadScale or 1 end
            head.Transparency = isHeadModEnabled and 0.5 or 0
            for _, d in pairs(head:GetChildren()) do if d:IsA("Decal") then d.Transparency = head.Transparency end end
        end
    end
end

-- Mag Logic (Triggered by Range + Mouse Click)
game:GetService("RunService").RenderStepped:Connect(function()
    local ball = workspace:FindFirstChild("Football") or workspace:FindFirstChild("Ball")
    local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")

    -- Check all conditions: Toggle ON, Ball Exists, Mouse Held, and Player in Range
    if isMagEnabled and ball and hrp and isMouseDown then
        local distance = (hrp.Position - ball.Position).Magnitude
        
        if distance <= magRange then
            -- Create/Update Visual Sphere
            if not visualSphere then
                visualSphere = Instance.new("Part")
                visualSphere.Shape = Enum.PartType.Ball
                visualSphere.Color = Color3.fromRGB(255, 0, 0)
                visualSphere.Transparency = 0.5
                visualSphere.Material = Enum.Material.ForceField
                visualSphere.CanCollide = false
                visualSphere.Anchored = true
                visualSphere.Parent = workspace
            end
            visualSphere.Size = Vector3.new(magRange * 2, magRange * 2, magRange * 2)
            visualSphere.Position = ball.Position
            
            -- Pull Ball to Player
            ball.Velocity = (hrp.Position - ball.Position).Unit * 75
        else
            -- Cleanup if out of range
            if visualSphere then visualSphere:Destroy() visualSphere = nil end
        end
    else
        -- Cleanup if mouse released or toggle off
        if visualSphere then visualSphere:Destroy() visualSphere = nil end
    end
end)

-- --- UI SETUP ---

-- Player Tab
PlayerTab:CreateSection("Self Movement")
PlayerTab:CreateSlider({
   Name = "WalkSpeed", Range = {16, 300}, Increment = 1, CurrentValue = 16, Flag = "WS",
   Callback = function(v) if localPlayer.Character:FindFirstChild("Humanoid") then localPlayer.Character.Humanoid.WalkSpeed = v end end
})
PlayerTab:CreateSlider({
   Name = "Personal Gravity", Range = {0, 196}, Increment = 1, CurrentValue = 196, Flag = "GRV",
   Callback = function(v) workspace.Gravity = v end
})

-- Server Tab
ServerTab:CreateSection("Others")
ServerTab:CreateToggle({
   Name = "Enable Head Mods", CurrentValue = false, Flag = "HM",
   Callback = function(v) isHeadModEnabled = v for _, p in ipairs(game.Players:GetPlayers()) do updatePlayerHead(p) end end
})
ServerTab:CreateSlider({
   Name = "Head Size", Range = {1, 10}, Increment = 0.5, CurrentValue = 1, Flag = "HS",
   Callback = function(v) targetHeadScale = v end
})

-- Football Tab
FootballTab:CreateSection("Click-to-Mag")
FootballTab:CreateToggle({
   Name = "Enable Magnet", CurrentValue = false, Flag = "MG",
   Callback = function(v) isMagEnabled = v end
})
FootballTab:CreateSlider({
   Name = "Mag/Sphere Range", Range = {5, 60}, Increment = 1, CurrentValue = 15, Flag = "MR",
   Callback = function(v) magRange = v end
})

Rayfield:Notify({Title = "Script Ready", Content = "Hold Left Click in range to Mag.", Duration = 5})
